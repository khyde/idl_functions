; $ID:	FILE_RESAVE.PRO,	2020-07-01-12,	USER-KJWH	$
; #########################################################################; 
PRO FILE_RESAVE,FILES,VERBOSE=VERBOSE
;+
; PURPOSE:  READS OLD SAVE FILES [STRUCT_SD_SAVE] OR NEW SAV FILES AND WRITES NEW SAV FILES USING STRUCT_WRITE
;
; CATEGORY: FILES;
;
;
; INPUTS: 
;        FILES..... FULL SAVES FILE NAMES OF 
;
;
; KEYWORDS:
;         
;          VERBOSE..... PRINTS PROGRAM PROGRESS [FILE NAME,MINMAX IMAGE ORIGINAL SAVE,MINMAX NEW SAV     
   

; OUTPUTS: STRUCTURE IS WRITTEN AS A SAV FILE USING STRUCT_WRITE
;
;; EXAMPLES:
;
; MODIFICATION HISTORY:
;     SEP 20, 2016  WRITTEN BY: J.E. O'REILLY
;-
; #########################################################################

;*****************************
ROUTINE_NAME  = 'FILE_RESAVE'
;*****************************

IF NONE(FILES) THEN FILES = DIALOG_PICKFILE(FILTERS = ['SAV','SAVE'],/MULTIPLE_FILES)

;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FOR NTH = 0L,NOF(FILES) -1L DO BEGIN
  FILE = FILES[NTH]
  IF KEY(VERBOSE) THEN PFILE,FILE,/R
  S = IDL_RESTORE(FILE)
  OUT = REPLACE(FILE,'.SAVE','.SAV')
  STRUCT_WRITE,S,FILE = OUT
  IF KEY(VERBOSE) THEN PMM,STRUCT_READ(OUT)  
ENDFOR;FOR NTH = 0L,NOF(FILES) -1L DO BEGIN
;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF




END; #####################  END OF ROUTINE ################################
