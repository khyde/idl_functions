; $ID:	PLOTDEGL_DEMO.PRO,	2020-06-26-15,	USER-KJWH	$

	PRO PLOTDEGL_DEMO

;+
; NAME:
;		PLOTDEGL_DEMO
;
; PURPOSE:;
;		This procedure is a demo to add latitude and longitude lines and degree labels to an image using PLOTGRAT and PLOTDEGL
;
; CATEGORY:
;		Images
;
; CALLING SEQUENCE:
;
;
; INPUTS:
;
; OPTIONAL INPUTS:
;
; KEYWORD PARAMETERS:
;
;
; OUTPUTS:
;
;
;	NOTES:
;
;
; MODIFICATION HISTORY:
;			Written Nov 04, 2008 by K.J.W.Hyde, 28 Tarzwell Drive, NMFS, NOAA 02882 (kimberly.hyde@noaa.gov)
;-
;	****************************************************************************************************
	ROUTINE_NAME = 'PLOTDEGL_DEMO'

;	===> Initialize ERROR to a null string. If errors are encountered ERROR will be set to a message.
;			 The calling routine can check error (e.g.IF ERROR NE 0 then there was a problem and do this or that)
	ERROR = ''

	PAL_SW3,R,G,B
	DIR = 'D:\IDL\TEST\'
	SAVEFILE = DIR + '!S_20001014170917-SEAWIFS-OV2-MLAC-REPRO5-NEC-CHLOR_A.save'
	PNGFILE  = DIR + '!S_20001014170917-SEAWIFS-OV2-MLAC-REPRO5-NEC-CHLOR_A.png'
	PNGFILE_LATLON  = DIR + '!S_20001014170917-SEAWIFS-OV2-MLAC-REPRO5-NEC-CHLOR_A-LATLON.png'

	DATA = STRUCT_SD_READ(SAVEFILE,STRUCT=STRUCT,RAW=raw,COUNT=count,SUBS=OK_GOOD,ERROR=ERROR,NO_MASK=NO_MASK)
	M_INFO=MAPS_SIZE('NEC')
	BIMAGE=BYTE(DATA) & BIMAGE(*,*)=254 & BIMAGE2 = BIMAGE

	BIMAGE(OK_GOOD) = SD_SCALES(DATA(OK_GOOD),PROD='CHLOR_A',/DATA2BIN)
	WRITE_PNG,PNGFILE,BIMAGE,R,G,B

;	===> Add lines with no frame
	DEGREE   = 3
	DEGLINES = 3

	ZWIN,BIMAGE
		ERASE,0
		MAP_NEC
		PLOTGRAT, DEGLINES, /PLOT_LINE
		PLOTDEGL, DEG=DEGREE,CHARSIZE=0.75,FONT=FONT,COLOR=255
		TEMP=TVRD()
	ZWIN

	OK = WHERE(TEMP EQ 255, COUNT) & IF COUNT GE 1 THEN BIMAGE[OK] = 0
	OK = WHERE(TEMP EQ 250, COUNT) & IF COUNT GE 1 THEN BIMAGE[OK] = 255

	WRITE_PNG,PNGFILE_LATLON,BIMAGE,R,G,B
	PRINT, 'Missing degree labels'
	SLIDEW, BIMAGE

;****** NO DEGREE LABELS WERE PRODUCED *******

STOP

; ===> Add lines and degree label to postscript
	OLDDEVICE= !D.NAME
	MAP_NEC
	PS_IMAGE, FILES=PNGFILE, /COLOR,FULL=full,/NO_CLOSE,SCALE=2,XOFFSET=2,YOFFSET=3
	TITLE = 'Chlorophyll !8a!7 (mg m!E-3!N)'
	CHARSIZE = 0.75
	LEG=COLOR_BAR_SCALE(PROD='CHLOR_A',POSITION=[0.02, 0.94,0.5, 0.96],CHARSIZE=0.75,/BOTTOM,TITLE=TITLE,/NO_UNIT,FONT='HELVETICA',SPECIAL_SCALE=SPECIAL_SCALE,PAL='PAL_BATHY')
	CHARSIZE=0.7
	XYOUTS,0.12, 0.2,'Mid-Atlantic Bight', ORIENTATION=60, ALIGN=-0.1, CHARSIZE=CHARSIZE, COLOR=0, CHARTHICK=1,/NORMAL,FONT='HELVETICA-ITALIC'
  XYOUTS,0.5, 0.76,'Gulf of !CMaine', ALIGN=-0.1, CHARSIZE=CHARSIZE, COLOR=0, CHARTHICK=1,/NORMAL,FONT='HELVETICA'
  XYOUTS,0.6, 0.62,'Georges !C   Bank', ALIGN=-0.1, CHARSIZE=CHARSIZE, COLOR=0, CHARTHICK=1,/NORMAL,FONT='HELVETICA'
  XYOUTS,0.4, 0.55,'Nantucket !C   Shoals', ALIGN=-0.1, CHARSIZE=CHARSIZE, COLOR=0, CHARTHICK=1,/NORMAL,FONT='HELVETICA'

  PLOTDEGL, DEG=3, NOFRAME=1, COLOR=0, CHARSIZE=0.75, FONT='HELVETICA',X_OFFSET=10,Y_OFFSET=200,$
   					XMARGIN=[0,1],YMARGIN=[0,0],XFUDGE=0.2,YFUDGE=0.2,XDEG=3,YDEG=3
  PLOTGRAT, 3,XDEG=3,YDEG=3, /PLOT_LINE, THICK=1.25,COLOR=254, MIN_LON=-78, MAX_LON=-64, MIN_LAT=30, MAX_LAT=48

  DEVICE,/CLOSE
  SET_PLOT,OLDDEVICE

	PRINT, 'Incorrect lower longitude degree labels.'
stop
	END; #####################  End of Routine ################################
