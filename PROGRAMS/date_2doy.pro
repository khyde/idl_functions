; $ID:	DATE_2DOY.PRO,	2020-06-30-17,	USER-KJWH	$
;###############################################################################################
FUNCTION DATE_2DOY ,DATE, NO_LEAP=NO_LEAP, PAD=PAD
;+
; NAME:
;       DATE_2DOY
;
; PURPOSE:	GENERATES A DECIMAL DAY OF YEAR FROM DATE
;	
;
; CATEGORY:
;		DATE
;
;
; INPUTS:
;   	A DATE STRING FORMATTED AS ANY OF THE FOLLOWING:
;				YYYY, YYYYMM, YYYYMMDD, YYYYMMDDHH,YYYYMMDDHHMM,YYYYMMDDHHMMSS
;
;	KEYWORDS:
;			NO_LEAP ... CONSTRAINS MAXIMUM DOY TO 365 INSTEAD OF 366 WHEN
;								 THE INPUT DATE IS THE LAST DAY OF A LEAP YEAR
;			PAD....... USES STR_PAD TO PREFIX THE DOY WITH THE CORRECT NUMBERS OF ZEROS
;
; OUTPUTS:
;		A DECIMAL DAY OF YEAR
;	PROCEDURE:
;		THIS ROUTINE CONVERTS DATE TO JULIAN DAY AND CALLS JD_2DOY
;
; EXAMPLES:
;		PRINT, DATE_2DOY(['2000','200001','20000101','2000010112','200001011230'])
;   PRINT, DATE_2DOY(['19770319','19770320','19770321'])
;   PRINT, DATE_2DOY(['20000101','200000110','20001221'],/PAD)
;   PRINT, DATE_2DOY(['20000101','200000110','20001221'],/PAD,/NO_LEAP)
;   
; MODIFICATION HISTORY:
;       WRITTEN BY:  J.E.O'REILLY, DEC 17,1997
;       AUG 04,2015,JOR, FIXED RETURN WHEN KEY IDOY IS USED;FORMATTING; CHANGED IDOY TO PAD
;#######################################################################################################       
;-
;**************************
ROUTINE_NAME = 'DATE_2DOY'
;**************************
; ===> TRIM INPUT DATE STRING AND CONVERT TO JULIAN DAY
JULIAN = DATE_2JD(STRTRIM(DATE,2))

;===> CONVERT JULIAN DAY TO DAY OF YEAR
DOY= JD_2DOY(JULIAN, NO_LEAP=NO_LEAP)
SDOY = STR_PAD(STRTRIM(FIX(JD_2DOY(JULIAN)),2),3)

IF N_ELEMENTS(DOY) EQ 1 THEN BEGIN
  IF KEY(PAD) THEN RETURN, SDOY[0] ELSE RETURN, DOY[0]  
ENDIF ELSE BEGIN
  IF KEY(PAD) THEN RETURN,SDOY ELSE RETURN, DOY  
ENDELSE;IF N_ELEMENTS(DOY) EQ 1 THEN BEGIN


 

	END; #####################  END OF ROUTINE ################################

