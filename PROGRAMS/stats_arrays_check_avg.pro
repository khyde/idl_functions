; $ID:	STATS_ARRAYS_CHECK_AVG.PRO,	2020-07-08-15,	USER-KJWH	$
; OCT 6,2011

PRO STATS_ARRAYS_CHECK_AVG


;STOP
DIR = 'C:\SMI\STATS\'
  A = STRUCT_SD_READ(DIR +'!D_20020705-SEAWIFS_AQUA-OV2_EOS-SMI-2009-CHLOR_A-MEAN.SAVE',STRUCT=STRUCT)
  PLIST,STRUCT.INFILE,/NOSEQ
  PRINT
  ATRANS = STRUCT.TRANSFORMATION
    PRINT
    IF ATRANS NE '' THEN PRINT, STRUCT.PROD +' DATA IN STATS_ARRAYS STRUCTURE FILE ARE TRANSFORMED ('+ATRANS +')'
    PRINT
  INFILE = STRUCT.INFILE
  I1 = STRUCT_SD_READ(INFILE[0])
    IF STRUCT.TRANSFORMATION EQ '' AND ATRANS EQ 'ALOG' THEN I1 = ALOG(I1) 
  
  I2 = STRUCT_SD_READ(INFILE[1],STRUCT = STRUCT)
    IF STRUCT.TRANSFORMATION EQ '' AND ATRANS EQ 'ALOG' THEN I2 = ALOG(I2) 
  OKA = WHERE(FINITE(A),COUNTA)
  OKI1 = WHERE(FINITE(I1),COUNTI1)
  OKI2 = WHERE(FINITE(I2),COUNTI2)
  
  PRINT,'COUNTS:  AVG: ' +STRTRIM(COUNTA,2)+'   I1: '+STRTRIM(COUNTI1,2) +'   I2 :'+STRTRIM(COUNTI2,2)
  OK = WHERE(FINITE(A) AND (FINITE(I1)  AND FINITE(I2)),COUNT)
  IF COUNT GE 1 THEN BEGIN
    FOR N= 0,11 DO BEGIN
    STOP
      PRINT,A(OK(N)),I1(OK(N)),I2(OK(N)),  (I1(OK(N))+I2(OK(N)))/2.0
      IAV =  (I1[OK]+ I2[OK])/2.0
      DIF = A[OK] - IAV[OK]
      IF STRUCT.TRANSFORMATION EQ '' AND ATRANS EQ 'ALOG' THEN PRINT,EXP(MINMAX(DIF))
      IF STRUCT.TRANSFORMATION EQ '' AND ATRANS EQ 'ALOG10' THEN PRINT,10^(MINMAX(DIF))
    ENDFOR
  ENDIF;IF COUNT GE 1 THEN BEGIN
  STOP

END
