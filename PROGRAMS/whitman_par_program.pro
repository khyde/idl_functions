; $ID:	WHITMAN_PAR_PROGRAM.PRO,	2020-06-26-15,	USER-KJWH	$
PRO WHITMAN_PAR_PROGRAM





DO_PAR = 0
DO_SST = 1

; GET NEC PAR SAVES

; ****************************************************************
	IF DO_PAR EQ 1 THEN BEGIN
; ****************************************************************

	PAR=FILELIST('E:\SEAWIFS_NEC\SAVE\*-PAR.SAVE')

	FA_PAR=PARSE_IT(PAR)
	DATES_PAR=STRMID(FA_PAR.FIRST_NAME,3,14)

	; GET TARGET INAMES FROM WHITMAN CSV
	DIR_OUT='E:\WHITMAN\'
	DELTA = 143 & LEFT = 420 & BOT = 659
	CSV=READ_CSV('D:\IDL\DATA\WHITMAN_PARFILES.CSV')
	;INAMES=CSV.
	INAMES= STRMID(CSV.SEAWIFS,0,14)
	JULIAN=DT_SAT2JULIAN(INAMES)
	DATES_TARGET=JD_2DATE(JULIAN)

	FILES_SAVE=CSV.FILE_NAME

	;OK = WHERE_IN(DATES_PAR,DATES_TARGET,Count, NCOMPLEMENT=ncomplement,COMPLEMENT=complement)
	;FA_PAR=FA_PAR(OK)
	;DATES_PAR=DATES_PAR(OK)


	;DATES=[DATES_TARGET,DATES_PAR]

	;SETS=WHERE_SETS(DATES)
	;SUBS=SETS.FIRST
	;FA_PAR=FA_PAR(SUBS)

	STOP

	MISSING=''
	FOR _DATE=0,N_ELEMENTS(DATES_TARGET)-1L DO BEGIN
		ADATE=DATES_TARGET(_DATE)
		OK = WHERE(DATES_PAR EQ ADATE,Count)
		IF COUNT NE 1 THEN BEGIN
			MISSING=[MISSING,INAMES(_DATE)]
			CONTINUE
		ENDIF ELSE BEGIN
			;DATA = STRUCT_SD_READ(FA_PAR(OK).FULLNAME)
			;IMAGE = DATA(LEFT:LEFT+DELTA, BOT:BOT+DELTA)
			;SAVE, FILENAME=DIR_OUT+FILES_SAVE(_DATE), IMAGE,/COMPRESS
		ENDELSE
	ENDFOR;

	STOP
	MISSING=MISSING(1:*)
	OK=WHERE(STRMID(MISSING,8,4) GT 1630 AND STRMID(MISSING,8,4) LT 1830,COUNT) & LIST, MISSING[OK]

	temp   = CREATE_STRUCT('NAMES','')
	        temp=REPLICATE(temp,N_ELEMENTS(MISSING[OK])) & temp.NAMES=MISSING[OK]

	        STRUCT_2CSV,'D:\IDL\DATA\MISSING_WHITMAN_PARFILES.CSV',TEMP

ENDIF; IF DO_PAR EQ 1 THEN BEGIN


; ****************************************************************
	IF DO_SST EQ 1 THEN BEGIN
; ****************************************************************


stop

		SST=FILELIST('D:\SST_GEQ-NEC-N4ATG\SAVE_MERGE\!D_*-SST*.SAVE')

		FA_SST=PARSE_IT(SST)
		DATES_SST=STRMID(FA_SST.FIRST_NAME,3,8)

		; GET TARGET INAMES FROM WHITMAN CSV
		DIR_OUT='E:\WHITMAN\'
		DELTA = 143 & LEFT = 420 & BOT = 659
		CSV=READ_CSV('D:\IDL\DATA\WHITMAN_PARFILES.CSV')
		;INAMES=CSV.
		INAMES= STRMID(CSV.SEAWIFS,0,14)
		JULIAN=DT_SAT2JULIAN(INAMES)
		DATES_TARGET=JD_2DATE(JULIAN)


;		WILL BE MATCHING YEAR MONTH DAY
		DATES_TARGET=STRMID(DATES_TARGET,0,8)
		U=UNIQ(DATES_TARGET)
		DATES_TARGET=DATES_TARGET(U)


		FILES_SAVE=CSV.FILE_NAME

STOP

		MISSING=''
		FOR _DATE=0,N_ELEMENTS(DATES_TARGET)-1L DO BEGIN
			ADATE=DATES_TARGET(_DATE)
			OK = WHERE(DATES_SST EQ ADATE,Count)
			IF COUNT NE 1 THEN BEGIN
				MISSING=[MISSING,INAMES(_DATE)]
				CONTINUE
			ENDIF ELSE BEGIN
				DATA = STRUCT_SD_READ(FA_SST[OK].FULLNAME)
				IMAGE = DATA(LEFT:LEFT+DELTA, BOT:BOT+DELTA)
				SAVEFILE=DIR_OUT+ADATE+'-N4ATG-MASS_BAY-SST.SAVE'
				SAVE, FILENAME=SAVEFILE, IMAGE,/COMPRESS
			ENDELSE
		ENDFOR;

		STOP

		MISSING=MISSING(1:*)
		OK=WHERE(STRMID(MISSING,8,4) GT 1630 AND STRMID(MISSING,8,4) LT 1830,COUNT) & LIST, MISSING[OK]

		temp   = CREATE_STRUCT('NAMES','')
		        temp=REPLICATE(temp,N_ELEMENTS(MISSING[OK])) & temp.NAMES=MISSING[OK]

		        STRUCT_2CSV,'D:\IDL\DATA\MISSING_WHITMAN_SSTFILES.CSV',TEMP

ENDIF; IF DO_SST EQ 1 THEN BEGIN

























DONE:
END
