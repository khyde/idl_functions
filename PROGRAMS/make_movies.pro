; $ID:	MAKE_MOVIES.PRO,	2020-06-26-15,	USER-KJWH	$

	PRO MAKE_MOVIES, ERROR = error

;+
; NAME:
;		MAKE_MOVIES
;
; PURPOSE:  A MAIN PROCEDURE USED TO MAKE MOVIES/ANIMATIONS FROM A TIME SERIES OF IDL SAVE FILES
; ;         PRESENTLY CONFIGURED TO MAKE MOVIES FROM 62 OF YHE 64 LMES
;
; CATEGORY:
;		CATEGORY
;   MOVIES
;
; INPUTS:
; NONE

; KEYWORD PARAMETERS:
;		KEY1:	Document keyword parameters like this. Note that the keyword is shown in ALL CAPS!
; NONE
; OUTPUTS:
;		This PROGRAM MAKES EITHER PNGS FROM SAVES OR AVI FROM PNGS, DEPENDING ON THE SWITCES SET 
;
; OPTIONAL OUTPUTS:
;		ERROR:     Any Error messages are placed in ERROR, if no errors then ERROR = ''
;
; 
;
; MODIFICATION HISTORY:
; WRITTEN JUL 25,2011, J.O'REILLY
;-
;	****************************************************************************************************
	ROUTINE_NAME = 'MAKE_MOVIES'
	;  STOP  ADD_ALG
	PAL_SW3, R,G,B
; >>> SWITCHES >>>>>>>>>>>
DO_MAKE_DIRS = 1
  DO_STRUCT_REMAP = 0
	DO_SAVES_2PNGS   = 2
	DO_PNG_2AVI          = 0
; >>> SWITCHES >>>>>>>>>>>
; >>> GET THE  CSV WITH LME NAMES AND LME CODES
  DB = CSV_READ('D:\IDL\DATA\LME_NAMES.CSV')
  STOP
  ;61=Antarctic   64 =Arctic Ocean  
  OK = WHERE(DB.CODE NE 61 AND DB.CODE NE 64,COUNT)
  IF COUNT NE 62 THEN STOP
  DB=DB[OK]
  NAMES = DB.NAMEK
  LME_CODES = DB.CODE
  STOP
  MAP_OUT = STRUPCASE(REPLACE(STRTRIM(DB[OK].NAME,2),' ','_'))
        
  ANAME = STRUPCASE(REPLACE(STRTRIM(DB[OK].NAME,2),'_',' '))
  CAPS =STR_CAP(ANAME,DELIM= ' ',/ALL)    
        
  
  IF DO_MAKE_DIRS GE 1 THEN BEGIN 
  PATH = 'E:\LME\'
  
  
  ;DIRS = FILE_FOLDERS PATH, FOLDERS= FOLDERS
  STOP
  ENDIF ; IF DO_MAKE_DIRS GE 1 THEN BEGIN ; 
; 
IF DO_STRUCT_REMAP GE 1 THEN BEGIN  
  NEW= STRUCT_SD_REMAP(FILES=FILES,DIR_OUT=DIR_OUT,MAP_OUT=MAP_OUT, PX_OUT=PX_OUT, PY_OUT=PY_OUT,OVERWRITE=OVERWRITE)
ENDIF; IF DO_STRUCT_REMAP GE 1 THEN BEGIN  

	
       
 IF DO_SAVES_2PNGS GE 1 THEN BEGIN    
    OVERWRITE = DO_SAVES_2PNGS GT 1
    DIR_IN = 'E:\OC-SEAWIFS-9-L3B\SAVE\'
    DIR_OUT = 'E:\OC-SEAWIFS-9-L3B\PNGS\'
    IF FILE_TEST(DIR_OUT,/DIR) EQ 0 THEN FILE_MKDIR,DIR_OUT
    PROD = ['CHLOR_A']
    ADD_COLORBAR=1
    ADD_DATEBAR=1
    ADD_LEG=1
    ADDDATE=0
    ADD_BATHY=0
    ADD_LAND=1
    ADD_COAST=1
    COAST_COLOR = 0
    ADD_OUTLINE=0
    OUTLINE_THICK=1
    OUTLINE_COLOR=255
    ADD_MAP=0  
    ADD_SENSOR=0
    ADD_METHOD=0
    ADD_PROD=0
    ADD_ALG=0
    PAL='PAL_SW3' 
     STOP
STRUCT_SD_2PNG, FILES, NAME=files,  $ ;  OBLIGITORY
                    DIR_OUT=dir_out, $ ; Everything below is optional (see defaults in STRUCT_SD_2IMAGE.PRO)
;                   ANNOTATIONS
                    ADD_LAND=add_land,ADD_COAST=add_coast,ADD_LAKES=add_lakes,$
                    ADD_COLORBAR=ADD_COLORBAR, COLORBAR_TITLE = COLORBAR_TITLE, ADD_DATEBAR=ADD_DATEBAR, ADDDATE=ADDDATE, $
                    ADD_SENSOR=ADD_SENSOR,ADD_PROD=ADD_PROD,ADD_METHOD=ADD_METHOD,ADD_ALG=ADD_ALG,ADD_COVERAGE=ADD_COVERAGE, $
                    ADD_MAP=ADD_MAP,ADD_OUTLINE=ADD_OUTLINE,OUTLINE_THICK=OUTLINE_THICK,OUTLINE_COLOR=OUTLINE_COLOR,ADD_EXTRA=add_extra, $
                    CHARSIZE_EXTRA = CHARSIZE_EXTRA, ADD_BATHY=ADD_BATHY,BATHS=baths,$
                    ADD_SOURCE=ADD_SOURCE,SOURCE_LABEL=SOURCE_LABEL,ADD_LME_OUTLINE=ADD_LME_OUTLINE,$
                    LONLAT_DEG=LONLAT_DEG,LONLAT_LINES=LONLAT_LINES,LONLAT_CHARSIZE=LONLAT_CHARSIZE,LONLAT_FRAME=LONLAT_FRAME,$
                    MAP_OUT=MAP_OUT,PX_OUT=PX_OUT,PY_OUT=PY_OUT,SPECIAL_SCALE=SPECIAL_SCALE,$
                    FLAGS=FLAGS,NO_MASK=NO_MASK,SOLO=SOLO,$
                    PAL=pal,$
                    COLORBAR_BOTTOM=COLORBAR_BOTTOM,COLORBAR_TOP=COLORBAR_TOP,COLORBAR_LEFT=COLORBAR_LEFT,COLORBAR_RIGHT=COLORBAR_RIGHT,$

;                   Colors
                    BACKGROUND=background,      LAND_COLOR=land_color,      COAST_COLOR=coast_color, FLAG_COLOR=flag_color,$
                    OUTSCAN_COLOR=outscan_color,OUTMAP_COLOR=outmap_color,  ALGFAIL_COLOR=algfail_color,$
                    HI_LO_COLOR=hi_lo_color,    BATHY_COLOR=bathy_color,  BATHY_THICK=bathy_thick,CRITERIA_COLOR=CRITERIA_COLOR,$
                    MISS_COLOR=miss_color,$
                    CRITERIA_RANGE=CRITERIA_RANGE,CRITERIA_OPER=CRITERIA_OPER,$
                    IMAGE_SCALE=image_scale,BELOW=BELOW,USE_PROD=USE_PROD,$
                    BIN_TOP=BIN_TOP,BIN_BOT=BIN_BOT,$
                    NO_NAME = no_name, NO_UNIT=no_unit, $
                    FONT=font,WELD=WELD,$
                    OVERWRITE=overwrite,QUIET=quiet,$
                    LME_CODE_OUT=LME_CODE_OUT, LME_NAME_OUT=LME_NAME_OUT
						
	;		ENDFOR; FOR NTH=0L, N_ELEMENTS(CODES)-1 DO BEGIN
;		ENDFOR; FOR _PROD = 0L, N_ELEMENTS(PROD)-1 DO BEGIN
	ENDIF; IF IF DO_SAVES_2PNGS GE 1 THEN BEGIN  

	IF DO_PNG_2AVI GE 1 THEN BEGIN
		OVERWRITE = DO_PNG_2AVI GE 2 

	ENDIF;IF DO_PNG_2AVI GE 1 THEN BEGIN
	



	END; #####################  End of Routine ################################
