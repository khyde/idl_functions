; $ID:	IDL_SESSION.PRO,	2020-07-01-12,	USER-KJWH	$
;#############################################################################################################
	PRO IDL_SESSION,RESTORE=RESTORE
	
;  PRO IDL_SESSION
;+
; NAME:
;		IDL_SESSION
;
; PURPOSE: THIS PROGRAM SAVES OR  RESTORES AN ENTIRE IDL SESSION
;
; CATEGORY:
;		PROGRAMS
;		 
;
; CALLING SEQUENCE:IDL_SESSION,RESTORE = RESTORE
;
; INPUTS:
;		VALUES:	INPUT DATA/VALUES
;		
; OPTIONAL INPUTS:
;		NONE:	
;		
; KEYWORD PARAMETERS:
;   RESTORE: RESTORES THE ENTIRE SESSION INTO MEMORY

; OUTPUTS:
;		
;; EXAMPLES:
;   IDL_SESSION; DEFAULT IS TO SAVE THE SESSION IN THE CURRENT DIRECTORY
;   IDL_SESSION,/RESTORE; RESTORES PREVIOUS SESSION FROM THE CURRENT DIRECTORY
;	NOTES:

;		
;
;
; MODIFICATION HISTORY:
;			WRITTEN APRIL 25,2012  J.O'REILLY
;#################################################################################
;
;
;-
;	*******************************************
ROUTINE_NAME='IDL_SESSION'
; *******************************************
; ===> USEFUL WORDS FOR SEARCHING:
; STOP PRINT N_ELEMENTS  ENDFOR SWITCHES  RETURN    ,
;===> GET CURRENT DIR
CD,CURRENT=DIR
DIR=DIR+PATH_SEP()
SAVEFILE_ALL      = DIR + ROUTINE_NAME +'-'+'ALL.SAV'
SAVEFILE_ROUTINES = DIR + ROUTINE_NAME +'-'+'ROUTINES.SAV'

;===> ALL COMMON BLOCKS, SYSTEM VARIABLES, AND LOCAL VARIABLES FROM THE CURRENT IDL SESSION:
IF NOT KEYWORD_SET(RESTORE) THEN BEGIN
  SAVE,FILENAME=SAVEFILE_ALL,/ALL,/COMPRESS 
  PFILE,SAVEFILE_ALL,/W
;===> USER DEFINED PROCEDURES AND FUNCTIONS IN A MACHINE INDEPENDENT, BINARY FORM
  SAVE,FILENAME=SAVEFILE_ROUTINES,/ROUTINES,/COMPRESS 
  PFILE,SAVEFILE_ROUTINES,/W
ENDIF ELSE BEGIN
  RESTORE,FILENAME=SAVEFILE_ALL
  PFILE,SAVEFILE_ALL,/R 
  
  RESTORE,FILENAME=SAVEFILE_ROUTINES
  PFILE,SAVEFILE_ROUTINES,/R   
ENDELSE;IF NOT KEYWORD_SET(RESTORE) THEN BEGIN

  
DONE:          
	END; #####################  END OF ROUTINE ################################
