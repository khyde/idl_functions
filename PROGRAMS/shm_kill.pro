; $ID:	SHM_KILL.PRO,	2020-06-30-17,	USER-KJWH	$
; 
PRO SHM_KILL
; #########################################################################; 
;+
; PURPOSE: THIS PROGRAM KILLS [REMOVES] ! ALL ! SHARED MEMORY AS WELL AS THE VARIABLE SHM_ARRAY
;         
;
; CATEGORY: SHM_ FAMILY [SHARED MEMORY]
;
; INPUT PARAMETERS:  NONE
;
; KEYWORDS: 
;                  
; OUTPUTS: NONE
;
; EXAMPLES:
;        SHM_OPEN,PX=4320,PY=2160,PZ=0,TYPE = 'INT'
;        SHM_KILL
;      
;        SHM_KILL
; NOTES: IT IS NECESSARY TO USE GONE,SHM_ARRAY 
;        TO AVOID HAVING THE SHARED MEMORY 
;        STILL EXISTING AS: UNMAPPENDING
; 
; MODIFICATION HISTORY:
;     JAN 18, 2016  WRITTEN BY: J.E. O'REILLY
;     JAN 20,2016,JOR ADDED COMMON SHM, SHM_ARRAY AND GONE,SHM_ARRAY

;-
; #########################################################################

;****************************
ROUTINE_NAME  = 'SHM_KILL'
;****************************
COMMON SHM, SHM_ARRAY


;===> GET THE SHM NAMES
HELP,/SHARED_MEMORY,OUTPUT = TXT 

IF TXT[0] EQ '' THEN GOTO,DONE
;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FOR NTH = 0,NOF(TXT)-1 DO BEGIN
  T = TXT[NTH]
  W = FIRST(WORDS(T,DELIM =' '))
  SHMUNMAP,W 
  MESSAGE,/INFORMATIONAL,'UNMAPPED MEMORY SEGEMENT:'+ W 
ENDFOR;FOR NTH = 0,NOF(TXT)-1 DO BEGIN
;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
GONE,SHM_ARRAY
DONE:
HELP,/SHARED_MEMORY,OUTPUT = TXT
IF TXT[0] EQ '' THEN MESSAGE,/INFORMATIONAL,'NO SHARED MEMORY SEGEMENTS LEFT'


END; #####################  END OF ROUTINE ################################
