; $ID:	ZWIN_DEMO.PRO,	2020-07-01-12,	USER-KJWH	$
;############################################################################3
	PRO ZWIN_DEMO

;+
; NAME:
;		ZWIN_DEMO
;
; PURPOSE: This PROGRAM IS A DEMO FOR USING ZWIN (THE Z-BUFFER)WITH A 2-D IMG
;
; CATEGORY:
;		GRAPHICS
;
; CALLING SEQUENCE:
;   ZWIN_DEMO
; INPUTS:

;
; KEYWORD PARAMETERS:
;		NONE
;
; OUTPUTS:
; A PNG FILE (JUNK.PNG) IN THE IDL DEFAULT WORKING DIRECTORY
;
;	PROCEDURE:
;		1)	A 2-D BINARY IMG IS MADE, THEN DISPLAYED TO THE Z-BUFFER WITH A CALL TO ZWIN
;		2)  SOME TEXT IS ADDED TO THE IMG USING XYOUTS
;		3)	THE ANNOTATED IMG IS READ FROM THE Z-BUFFER USING TVRD(),
;		4)  AN IDL PALETTE IS LOADED
;		5)	AND A PNG FILE IS WRITTEN TO THE DEFAULT IDL WORKING DIRECTORY
;
;
; MODIFICATION HISTORY:
;			Written ~2006  J.O'Reilly
;			MODIFIED,JOR, MAY 20,2010, (STREAMLINED ROUTINE)
;			FEB 23,2012,JOR, ADDED MORE DOCUMENTATION
;			FEB 26,2011, JOR, ADDED SWITCHES FOR ANNOTATED IMG AND A COASTLINE MAP
;			DEC 12,2013, JOR IMAGE TO IMG REMOVED STEP DO_TEST_L3B
;############################################################################3
;-
;	************************
ROUTINE_NAME = 'ZWIN_DEMO'
; ************************
 & WAIT,3
SET_PLOT,'WIN'
	;===> GET THE CURRENT IDL WORKING DIRECTORY
	CD,CURRENT=DIR
;===> ADD A PATH SEPERATOR TO DIR
DIR = DIR +PATH_SEP()	
;SSSSSSSSSSSSSS  SWITCHES SSSSSSSSSSSSSSSSS
DO_ANNOTATED_IMG  = 1
DO_MAP_IMG        = 1
;SSSSSSSSSSSSSS  SWITCHES SSSSSSSSSSSSSSSSS
; 
; 


;************************************
IF DO_ANNOTATED_IMG GE 1 THEN BEGIN
;************************************
  IMG = BINDGEN(1024,1024)  

  ;===> INITIALIZE THE Z_BUFFER AND DISPLAY THE IMG TO THE Z_BUFFER  
  ZWIN, IMG
    
  ;===> ADD SOME TEXT [USING IDL'D DEFAULT HERSHEY VECTOR FONT] ONTO THE IMG USING XYOUTS, WITH CENTER ALIGNMENT
  TXT = ROUTINE_NAME; OR WHATEVER
  XYOUTS,0.5,0.86,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 0,ALIGN = 0.5
  XYOUTS,0.5,0.70,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 200,ALIGN = 0.5
  ;===> NOW CHANGE THE FONT TO TIMES
  FONT_TIMES
  XYOUTS,0.5,0.56,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 0,ALIGN = 0.5
  XYOUTS,0.5,0.43,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 200,ALIGN = 0.5
  ;===> NOW USE SMALLER LETTERS AND ALIGN THE TEXT FROM THE RIGHT SIDE[RIGHT-JUSTIFIES THE TEXT
  XYOUTS,1.0,0.33,TXT,/NORMAL,CHARSIZE = 2,CHARTHICK = 2, COLOR = 0,ALIGN = 1.0
  XYOUTS,1.0,0.23,TXT,/NORMAL,CHARSIZE = 1,CHARTHICK = 1, COLOR = 200,ALIGN = 1.3;===> READ WHATEVER IS DISPLAYED ONTO THE Z-BUFFER [ THE IMG PLUS THE OVERLAIN TEXT]
  ;===> CHANGE THE FONT TO HELVETICA
  FONT_HELVETICA
  XYOUTS,1.0,0.10,TXT,/NORMAL,CHARSIZE = 2,CHARTHICK = 1, COLOR = 0,ALIGN = 1.0
  XYOUTS,1.0,0.03,TXT,/NORMAL,CHARSIZE = 1,CHARTHICK = 1, COLOR = 0,ALIGN = 1.0
  
  ;===> COPY FROM THE Z-BUFFER
  COPY= TVRD()
  ;===>  CLOSE THE Z_BUFFER[NOTHING IS PASSED TO ZWIN TO CLOSE IT] 
  ZWIN
    
  ;===> LOAD IDL'S RAINBOW PALETTE
  LOADCT,13  
  ;===> GET THE 256 BYTE ARRAYS FOR RED,GREEN,BLUE INTENSITIES [VALUES FROM OFF(0) TO FULLY ON(255)
  TVLCT,R,G,B,/GET
  HELP,R,G,B
  PNGFILE = DIR + 'ANNOTATED_IMG.PNG'
  WRITE_PNG,PNGFILE,COPY,R,G,B  & PFILE,PNGFILE,/W
ENDIF; IF DO_ANNOTATED_IMG GE 1 THEN BEGIN
;|||||||||||||||||||||||||||||||||||||||||||

;*********************************************
IF DO_MAP_IMG GE 1 THEN BEGIN
;*********************************************

  PX = 1024
  PY  =1024
  IM = BYTARR(PX,PY)  
  IM(*) = 255; WHITE
  ; ===> INITIALIZE THE Z_BUFFER AND DISPLAY THE IMG TO THE Z_BUFFER  
    ZWIN, IM
  ;ESTABLISH AN EAST COAST MAP PROJECTION VIA MAP_SET
  MAP_EC
  TV,IM
  ;===> DRAW A GREY-FILLED LANDMASS   
  MAP_CONTINENTS,/HIRES,/FILL,COLOR = 34
  ;===> DRAW A BLACK COASTLINE 
  MAP_CONTINENTS,/HIRES,/COASTS,COLOR = 0
  ;===> ADD SOME TEXT [USING IDL'D DEFAULT HERSHEY VECTOR FONT] ONTO THE IMG USING XYOUTS, WITH CENTER ALIGNMENT
  TXT = 'EAST COAST MAP'
  ;===> NOW CHANGE THE FONT TO TIMES
  FONT_TIMES
  XYOUTS,0.5,0.56,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 0,ALIGN = 0.5
  XYOUTS,0.5,0.43,TXT,/NORMAL,CHARSIZE = 3,CHARTHICK = 3, COLOR = 200,ALIGN = 0.5
  ;===> NOW USE SMALLER LETTERS AND ALIGN THE TEXT FROM THE RIGHT SIDE[RIGHT-JUSTIFIES THE TEXT
  XYOUTS,1.0,0.33,TXT,/NORMAL,CHARSIZE = 2,CHARTHICK = 2, COLOR = 0,ALIGN = 1.0
  XYOUTS,1.0,0.23,TXT,/NORMAL,CHARSIZE = 1,CHARTHICK = 1, COLOR = 200,ALIGN = 1.3;===> READ WHATEVER IS DISPLAYED ONTO THE Z-BUFFER [ THE IMG PLUS THE OVERLAIN TEXT]
  ;===> CHANGE THE FONT TO HELVETICA
  FONT_HELVETICA
  XYOUTS,1.0,0.10,TXT,/NORMAL,CHARSIZE = 2,CHARTHICK = 1, COLOR = 0,ALIGN = 1.0
  XYOUTS,1.0,0.03,TXT,/NORMAL,CHARSIZE = 1,CHARTHICK = 1, COLOR = 0,ALIGN = 1.0
  
  ;===> COPY FROM THE Z-BUFFER
  COPY= TVRD()
  ;===>  CLOSE THE Z_BUFFER[NOTHING IS PASSED TO ZWIN TO CLOSE IT] 
  ZWIN
    
  ;===> LOAD PAL36 PALETTE
  PAL_36,R,G,B
  ;===> GET THE 256 BYTE ARRAYS FOR RED,GREEN,BLUE INTENSITIES [VALUES FROM OFF(0) TO FULLY ON(255)
  TVLCT,R,G,B,/GET
  HELP,R,G,B
  PNGFILE = DIR + 'COASTLINE_IMG.PNG'
  WRITE_PNG,PNGFILE,COPY,R,G,B & PFILE,PNGFILE,/W
  ENDIF; IF DO_MAP_IMG GE 1 THEN BEGIN
;||||||||||||||||||||||||||||||||||||||||||||||||||  
;===> INFORM THAT THIS PROGRAM IS DONE


	END; #####################  End of Routine ################################
