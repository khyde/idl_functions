; $ID:	DEMO_STATS2.PRO,	2020-06-30-17,	USER-KJWH	$
PRO DEMO_STATS2
; DEMONSTRATES HOW TO GENERATE ONE LARGE DBF WITH ALL THE STATISTICS FOR ALL CRUISES



files =['AL7812.DBF', 'BE7801.DBF', 'JUNKCR.DBF']
; FILES = FILELIST('    ')
 fn = PARSE_IT(files)



FOR nth = 0,N_ELEMENTS(files) -1 DO BEGIN

; FOR EACH OF files READ IN DBF
; GET AN X,Y

  ; DUMMY X AND Y BELOW
  X = [1,2,3,4,5]
  Y = [2,3,2,4,6]

; generate regression statistics
  S = STATS2(X,Y)
  S4 = S(4)  ; REDUCED MAJOR AXIS LINEAR REGRESSION


; If the first cruise then MAKE A STRUCTURE TO HOLD STATS AND CRUISE NAME
  IF nth EQ 0 THEN BEGIN

    ALL_STATS = CREATE_STRUCT('CRUISE',' ' , S4)

;   REPLICATE STRUCTURE TO HOLD RESULTS FOR ALL CRUISES
    ALL_STATS = REPLICATE(ALL_STATS,N_ELEMENTS(FILES))
  ENDIF

    ALL_STATS(nth).cruise = fn[NTH].NAME

    FOR _tag =1, N_TAGS(ALL_STATS)-1 DO BEGIN ; SKIP OVER FIRST TAG (CRUISE NAME)
      ALL_STATS(nth).(_tag) = S4.( _tag-1)
    ENDFOR

 ENDFOR



; MAKE A DB WITH STATS FROM ALL CRUISES

WRITE_DB,'C:\IDL\JAY\JUNK.DBF',ALL_STATS






END
