; $ID:	STRUCT_HAS_DEMO.PRO,	2020-07-01-12,	USER-KJWH	$
;+
; ######################################################################### 
  PRO STRUCT_HAS_DEMO

;  PURPOSE:  STRUCT_HAS_DEMO IS A DEMO FOR THE STRUCT_HAS FUNCTION

; CATEGORY: 
  
; 

; 

; MODIFICATION HISTORY:
;     OCT 15, 2004 WRITTEN BY: J.E. O'REILLY
;     NOV 13,2014 JOR REVISED WITH NEW ALPHA SWITCHES
;                 WHICH ALLOW FOR MORE FLEXIBLE CONTROL OF THE PROCESSING
;                 AND FUTURE EXPANSION OF SWITCH CODES
;     NOV 20.2014,JOR IMPLEMENTED SWITCHES FUNCTION SUGGESTED BY K. HYDE
;     DEC 9,2014,JOR REPLACED SWITCHES WITH HAS
;     NOV 15,2015,JOR UPDATED TO REFLECT CHANGES TO STRUCT_HAS
;-
; #########################################################################

;*****************************
ROUTINE_NAME  = 'STRUCT_HAS_DEMO'
;*****************************


;===> #####   SWITCHES 
  DO_NC				          =	'VS';VS
  DO_MAPS_DB            = 'VS';VS
  DO_GET_IMAGE_FROM_SD  = 'VS';VS
  DO_STATS_ARRAYS       = 'VS'
  
;|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||




;*************************
IF KEY(DO_NC) THEN BEGIN
;*************************
  , 'DO_NC'
  PRINT,'THIS STEP SHOWS HOW STRUCT_HAS MAY GET THE IMAGE DATA IN THE SD FROM A NC FILE'
  SWITCHES,DO_NC,STOPP=STOPP,OVERWRITE=OVERWRITE,VERBOSE=VERBOSE,INIT=INIT,R_FILES=R_FILES,R_DATASETS=R_DATASETS,R_MAPS=R_MAPS,R_PRODS=R_PRODS,DATERANGE=DATERANGE  
  IF STOPP THEN STOP
  ;===> CHANGE !S.DATASETS TO THE EXTERNAL DRIVE >
  FILES = FLS(!S.FILES ,'o1997128.L3m_DAY_CHL_chlor_a_9km.nc')
  FILES = GET(FILES,NUM = NUM)
  ;FILES = GET(FILES)  
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
  FOR NTH = 0,NOF(FILES)-1 DO BEGIN
     FILE = FILES[NTH] 
     IF VERBOSE THEN PFILE,FILE,/U
     IF VERBOSE THEN POF,NTH,FILES
     D = READ_NC(FILE) 
     IF VERBOSE THEN  ST,D
     IF STRUCT_HAS(D,'SD.CHLOR_A.IMAGE') THEN DATA = STRUCT_GET(D,'SD.CHLOR_A.IMAGE')
     IF VERBOSE THEN HELP,DATA
     P,MM(DATA),(FILE_PARSE(FILE)).NAME
     IF STOPP THEN STOP
     GONE,DATA
  ENDFOR;FOR NTH = 0,N_ELEMENTS(FILES)-1 DO BEGIN
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
 , 'DO_NC'
ENDIF ; IF DO_NC GE 1 THEN BEGIN
;|||||||||||||||||||||||||||||||
; 

;*****************************
IF KEY(DO_MAPS_DB) THEN BEGIN
 ;****************************
  , 'DO_MAPS_DB'
  PRINT,'THIS STEP SHOWS HOW STRUCT_HAS MAY GET THE DATA FROM THE MAPS MASTER DATABASE' & WAIT,1
  DB = MAPS_READ()
  SWITCHES,DO_MAPS_DB,STOPP=STOPP,OVERWRITE=OVERWRITE,VERBOSE=VERBOSE,INIT=INIT,R_FILES=R_FILES,R_DATASETS=R_DATASETS,R_MAPS=R_MAPS,R_PRODS=R_PRODS,DATERANGE=DATERANGE  
  IF STOPP THEN STOP
    S = STRUCT_HAS(DB,'MAP')
    IF VERBOSE THEN PL,S
    IF STOPP THEN STOP
    S = STRUCT_HAS(DB,'PROJ')
    IF VERBOSE THEN P,S
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
  , 'DO_MAPS_DB'
ENDIF ; IF DO_MAPS_DB GE 1 THEN BEGIN
; |||||||||||||||||||||||||||||||||||


;*****************************
IF KEY(DO_GET_IMAGE_FROM_SD) THEN BEGIN
  ;****************************
  , 'DO_GET_IMAGE_FROM_SD'
  PRINT,'THIS STEP SHOWS HOW STRUCT_HAS MAY GET THE IMAGE FROM FROM A SAVE MADE WITH STRUCT_SD_WRITE' & WAIT,1
  SWITCHES,DO_GET_IMAGE_FROM_SD,STOPP=STOPP,OVERWRITE=OVERWRITE,VERBOSE=VERBOSE,INIT=INIT,R_FILES=R_FILES,R_DATASETS=R_DATASETS,R_MAPS=R_MAPS,R_PRODS=R_PRODS,DATERANGE=DATERANGE
  IF STOPP THEN STOP
  IF GET_COMPUTER() EQ 'OOLONG' THEN !S.DATASETS = REPLACE(!S.DATASETS,'F:\','C:\')
  DIR= !S.DATASETS  + 'OC-SEAWIFS-MLAC\NEC\STATS\CHLOR_A-OC4\' 
  FILES = FLS(DIR,'D_*.SAVE') & PN,FILES
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
  FOR NTH = 0,NOF(FILES)-1 DO BEGIN
    FILE = FILES[NTH]
    STRUCT = IDL_RESTORE(FILE)
    DATA = STRUCT_HAS(STRUCT,'CHLOR_A.IMAGE')
    IF VERBOSE THEN   P,MM(DATA)
    
  ENDFOR;FOR NTH = 0,NOF(FILES)-1 DO BEGIN
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
  IF HAS(DO_GET_IMAGE_FROM_SD,'S') THEN STOP
 
  ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
  , 'DO_GET_IMAGE_FROM_SD'
ENDIF ; IF DO_GET_IMAGE_FROM_SD GE 1 THEN BEGIN
; |||||||||||||||||||||||||||||||||||



; **********************************
IF KEY(DO_STATS_ARRAYS) THEN BEGIN
  ; **********************************
  , 'DO_STATS_ARRAYS'
  SWITCHES,DO_STATS_ARRAYS,STOPP=STOPP,OVERWRITE=OVERWRITE,VERBOSE=VERBOSE,INIT=INIT,R_FILES=R_FILES,R_DATASETS=R_DATASETS,R_MAPS=R_MAPS,R_PRODS=R_PRODS,DATERANGE=DATERANGE
  IF STOPP THEN STOP
  ARR = FINDGEN([20,10])
  IF VERBOSE THEN PRINT,'MINMAX OF DATA  :',MM(ARR)

  S = STATS_ARRAYS(ARR,/START,/CALC)
  IF VERBOSE THEN BEGIN
    ST,S
  NAMES = TAG_NAMES(S)
   ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
   FOR NTH = 0,NOF(NAMES) -1 DO BEGIN
     TAG = NAMES[NTH]
     HELP,TAG,STRUCT_HAS(S,TAG)
    
    
   ENDFOR; FOR NTH = 0,N_TAGS(S) -1 DO BEGIN
   ;FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF

 ENDIF;  ENDIF;IF VERBOSE THEN BEGIN
  
  STOP
  , 'DO_STATS_ARRAYS'
ENDIF ;   IF KEY(DO_STATS_ARRAYS) THEN BEGIN
; ||||||||||||||||||||||||||||||||||||||||||||






END; #####################  END OF ROUTINE ################################
